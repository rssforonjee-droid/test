:root { --tabbar-h: 50px;}

/* Подключаем 2 начертания Manrope Cut */
@font-face {
  font-family: "Manrope Cut";
  src: url("./fonts/Manrope_Cut_008-Medium.woff2") format("woff2");
  font-weight: 500;              /* Medium */
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Manrope Cut";
  src: url("./fonts/Manrope_Cut_008-ExtraBold.woff2") format("woff2");
  font-weight: 800;              /* ExtraBold */
  font-style: normal;
  font-display: swap;
}

/* Применение по умолчанию */
html, body {
  font-family: "Manrope Cut", Arial, sans-serif;
  overflow-x: hidden;
}

.button, .heart, .tab, .linklike {
  outline: none;                    /* уберёт дефолтную синюю рамку */
  -webkit-tap-highlight-color: transparent; /* уберёт «голубую плашку» на мобильных */
}

input, button, select, textarea {
  font: inherit;              /* наследует font-family, size, line-height, weight */
  letter-spacing: inherit;
  color: inherit;             /* по желанию */
}

body {
  background: #ffffff;
  color: #0f1729;
  padding: 32px 0 48px;
  padding-bottom: calc(var(--tabbar-h) + env(safe-area-inset-bottom));
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
}

/* Стили шрифтов */
.m20 { font-weight: 500; font-style: normal; font-display: swap; font-size: 15px; line-height: 20px; }
h3, .h3 { font-weight: 800; font-style: normal; font-display: swap; font-size: 21px; line-height: 26px; }
h4, .h4 { font-weight: 800; font-style: normal; font-display: swap; font-size: 18px; line-height: 22px; }
.s10 { font-weight: 500; font-style: normal; font-display: swap; font-size: 13px; line-height: 18px; }
.s20 { font-weight: 500; font-style: normal; font-display: swap; font-size: 13px; line-height: 16px; }
.xs  { font-weight: 500; font-style: normal; font-display: swap; font-size: 11px; line-height: 14px; }
    
/* Сниппеты */
.cards{ 
  display:grid; 
  grid-template-columns:repeat(2,minmax(0,1fr)); 
  gap:10px; 
  padding:0 10px 60px; 
}

.card{
  position: relative;
  border-radius: 16px;
  overflow: visible;
}

.card-content{ 
  position: relative;
  z-index: 1;
  padding: 10px 6px;
  display:flex;
  flex-direction:column;
  gap:1px;
  color:#1f2535;
}

/* строка заголовка */
.title-row{
  position: relative;      /* якорь для расположения сердца */
  display: block;
  padding-right:30px;      /* резерв под сердце, чтобы текст не налезал */
}

/* кнопка избранного: фиксируем в правом верхнем углу строки */
.title-row .heart{
  position: absolute;
  top: -3px;
  right: -3px;
  width: 28px;
  height: 28px;
  display: grid;
  place-items: center;
  background: none;
  border: 0;
  padding: 0;
  cursor: pointer;
  overflow: visible;
}

/* сама иконка внутри кнопки */
.title-row .heart img{
  width: 22px;
  height: 22px;
  display: block;
}

.price { text-decoration:none; } 

.price-row{
  display: flex;
  flex-direction: column;  /* цена сверху, ниже — пара */
  min-width: 0;
}

.price, .price-old{ text-decoration: none; }

/* зачёркнутая старая цена */
.price-old{
  position: relative;
  display: inline-block;
  line-height: 1;
}

.price-old::after{
  content: "";
  position: absolute;
  left: 0; right: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 0.55em;
  pointer-events: none;
  background: url("./res/price_old.svg") no-repeat left 50% / 100% 100%;
}

/* Старая цена + скидка в одну строку, без переноса */
.old-line{
  display: flex;
  align-items: baseline;
  gap: 4px;
  flex-wrap: nowrap;
  white-space: nowrap;
}

.discount{
  color:#F71B47;
  white-space: nowrap;
}

/* ====== ГАЛЕРЕЯ ====== */

/* внешний хост — для бейджа/точек; НИЧЕГО не клипает */
.image-host{
  position: relative;
  overflow: visible;
}

/* внутренний квадрат — именно он КЛИПАЕТ слайды */
.image{
  position: relative;
  width: 100%;
  aspect-ratio: 1/1;
  overflow: hidden;
  border-radius: 16px;
  touch-action: pan-y;
  overscroll-behavior: contain;
  user-select: none;
}

/* лента */
.image-rail{
  display: flex;
  width: 100%;
  height: 100%;
  overflow: visible;
  will-change: transform;
  transition: transform 320ms ease;
}

/* каждый слайд = ширина контейнера */
.image-slide{
  flex: 0 0 100%;
  height: 100%;
  position: relative;
  background-position: center;
  background-size: cover;
}

.image-slide video{
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
  border: 0;
}

/* <img> внутри — режим cover и центр */
.image-slide > img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
}

/* точки (если есть) */
.image-host .image-dots{
  position: absolute;
  right: 0px;
  bottom: 8px;
  display: flex;
  gap: 2px;
  padding: 4px 0px;
  margin: 2px 16px;
  border-radius: 10px;
  z-index: 3;
}
.image-host .image-dot{
  width: 4px; height: 4px; border-radius: 50%;
  background: rgba(255,255,255,.55);
}
.image-host .image-dot.active{ background:#fff; width: 8px; height: 4px; border-radius: 100px; }

/* ====== БЕЙДЖ (ленточка) ====== */

/* сам бейдж всегда поверх фото и может «свисать» */
.image-host .ribbon{
  position: absolute;
  left: -3px;
  bottom: -6px;
  z-index: 4;
  pointer-events: none;
}

/* конструкция бейджа */
.ribbon{ --ribbon:#30c977; --h:28px; --cap:24px;
  display: inline-flex; 
  align-items: center; 
  height: var(--h);
  color: #fff; 
  line-height: 4;
}
.ribbon__body{
  background: var(--ribbon);
  height: 100%;
  display: inline-flex; align-items: center;
  padding: 0 1px;
}
.ribbon__cap{
  width: var(--cap); height: 100%;
  background-color: var(--ribbon);
  flex: 0 0 var(--cap);
}
.ribbon__cap--left{
  -webkit-mask: url("./res/left_bage_flag.svg") no-repeat center/100% 100%;
          mask: url("./res/left_bage_flag.svg") no-repeat center/100% 100%;
  margin-right: -6px;
}
.ribbon__cap--right{
  -webkit-mask: url("./res/right_bage_flag.svg") no-repeat center/100% 100%;
          mask: url("./res/right_bage_flag.svg") no-repeat center/100% 100%;
  margin-left: -6px;
}

/* сердце слегка подпрыгивает */
.heart.animating { animation: heart-pop 300ms ease; }
@keyframes heart-pop {
  0% { transform: scale(1); }
  40% { transform: scale(1.28); }
  100% { transform: scale(1); }
}

/* базовые стили кнопки сердца (без позиционирования — его задаём в .title-row .heart) */
.heart{
  overflow: visible;
  width: 32px; 
  height: 32px;
  display: grid; 
  place-items: center;
  cursor: pointer;
  background: none;
  border: none;
  padding: 0;
}

/* сам svg-икон */
.heart img{ 
  width: 22px; 
  height: 22px; 
  display:block; 
}  

/* --- УДАЛЕНО: .particles, .particle, @keyframes burst (не нужны с общим модулем конфетти) --- */


/*ТАББАР*/

/* таббар */
.tabbar{
  --tabbar-h: 50px;
  position: fixed; left:0; right:0; bottom:0;
  height: calc(var(--tabbar-h) + env(safe-area-inset-bottom));
  padding: 0 clamp(12px,4vw,24px) env(safe-area-inset-bottom);
  display:flex; align-items:center; justify-content:space-evenly;
  gap: clamp(24px,8vw,40px);
  background:#fff; border-top:1px solid rgba(0,0,0,.08);
  z-index:1000;
}

/* базовый вид кнопки */
.tabbar__btn{
  --icon: none;               /* сюда у каждой кнопки подставим свой url(...) */
  --active-color: #111;       /* цвет активной иконки */
  width:30px; height:30px; flex:0 0 30px;
  border:0; border-radius:6px; cursor:pointer;
  background: no-repeat center / contain;
  background-image: var(--icon);
}

/* активная: красим через mask */
.tabbar__btn.is-active{
  background-image: none;
  background-color: var(--active-color);
  -webkit-mask: var(--icon) no-repeat center / contain;
          mask: var(--icon) no-repeat center / contain;
  filter: none;
}

/* назначаем svg каждой кнопке */
.tabbar__btn.home      { --icon: url("./res/tabbar_home.svg"); }
.tabbar__btn.favorites { --icon: url("./res/tabbar_favourites.svg"); }
.tabbar__btn.wallet    { --icon: url("./res/tabbar_wallet.svg"); }
.tabbar__btn.messenger { --icon: url("./res/tabbar_message.svg"); }
.tabbar__btn.assistent { --icon: url("./res/tabbar_assistent.svg"); }

/* убираем рамку у кнопок в таббаре */
.tabbar__btn{
  -webkit-tap-highlight-color: transparent;
  outline: none;
}

/* на всякий */
.tabbar__btn:focus{ outline: none; box-shadow: none; }
.tabbar__btn:focus-visible{ outline: none; box-shadow: none; }
.tabbar__btn::-moz-focus-inner{ border: 0; }

/*ПЛАВАЮЩИЕ КНОПКИ*/

/* Контейнер кнопок — по центру, над таббаром */
.float-cta{
  position: fixed;
  left: 0;
  right: 0;
  bottom: calc(var(--tabbar-h) + env(safe-area-inset-bottom) + 12px);
  display: flex;
  justify-content: center;
  gap: 6px;
  z-index: 950;
  transition: transform .32s ease, opacity .2s ease;
  pointer-events: none;
}

/* Состояние: «уплыли под таббар» */
.float-cta.is-away{
  transform: translateY(calc(var(--tabbar-h) + 28px));
  opacity: 0;
}

/* Кнопки */
.cta{
  pointer-events: auto;
  border: 0;
  border-radius: 999px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}

.cta--primary{
  color: #000;
  background: #fff;
  height: 44px;
  width: 44px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0;
  border:0;
  border-radius:999px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  user-select:none;
  box-sizing:border-box;
  box-shadow: 0 4px 30px 0px rgba(0, 0, 0, 0.12);
}

.cta__icon_add{
  --icon: url("./res/icon_floating_add.svg");
  width:20px; height:20px; flex:0 0 20px;

  /* заливаем нужным цветом */
  background-color: #000;          /* меняешь тут */

  /* используем SVG как маску */
  -webkit-mask: var(--icon) center / contain no-repeat;
          mask: var(--icon) center / contain no-repeat;

}

.cta--ghost{
  color: #000;
  background: #fff;
  padding: 0 20px;
  box-shadow: 0 4px 30px 0px rgba(0, 0, 0, 0.12);
}

/* полностью отключаем любые визуальные состояния */
.cta:hover,
.cta:active,
.cta:focus,
.cta:focus-visible{
  outline: none;
  box-shadow: inherit;
  transform: none;
}

/*ПОИСК*/

.search-layer{
  /* настраиваемые переменные */
  --bw: 0.5px;
  --angle: 108deg;
  --border-light: rgba(244, 234, 255, 1);
  --border-dark:  rgba(215, 187, 225, 1);
  --feather: 100deg;

  position: relative;
  height: 132px;
  margin: 16px 10px;
  border-radius: 22px;
  border: var(--bw) solid transparent;

  /* 2 слоя: 1) фон карточки, 2) собственно рамка */
  background:
    linear-gradient(135deg,#F5D7F7,#D7C3F5) padding-box,
    conic-gradient(from var(--angle),
                   var(--border-light) 0 180deg,
                   var(--border-dark)  0 360deg) border-box;

  box-shadow: 0 0 40px 10px rgba(150,94,235,0.4);

  display: flex;
  flex-direction: column;
  align-items: stretch;
  padding: 6px;
  gap: 12px;
}

/* На всякий случай уничтожаем старые декоративные слои */
.search-layer::before,
.search-layer::after{ content:none !important; }

/* строка поиска */
.search-layer .search{ width: 100%; }

.search{
  display:flex; 
  align-items:center; 
  gap:6px;
  background:#fff; 
  border-radius:16px; 
  padding:0 16px;
  color:#1f2535; 
  margin:0;
}

.search-row{
  display:flex;
  align-items:center;
  gap:6px;
}

/* круг 50×50 слева */
.search-badge{
  position: relative;
  width:52px;
  height:52px;
  flex:0 0 52px;
  border-radius:16px;
  background:#fff;
}

/* внутренняя иконка 46×46 по центру */
.search-badge::before{
  content: "";
  position: absolute;
  left: 50%; top: 50%;
  width: 50px; height: 50px;
  transform: translate(-50%, -50%);
  background: url("./res/ava_search.png") center / contain no-repeat;
  pointer-events: none;
  border-radius:16px;
}

/* поиск занимает остаток ряда */
.search-row .search{ 
  flex:1 1 auto; 
  width: auto;
}

.search-icon{
  width:20px; 
  height:20px;
  background: url("./res/icon_search.svg") center/contain no-repeat;
  transform: translateY(0px);
  flex:0 0 20px;
}

.search input{
  flex:1 1 auto; 
  min-width:0;
  height:52px;
  border:none; 
  margin:0; 
  color:#757575;
}
.search input:focus{ outline:none; box-shadow:none; }

/* блок с текстом под инпутом */
.search-caption{
  display: flex;
  flex-direction: column;
  gap: 0px;
  color: #000;
  pointer-events: none;
  margin: 0 14px;
}

/* заголовок + стрелка */
.search-caption .h3{
  display: inline-flex;
  align-items: center;
  gap: 3px;
  pointer-events: auto;
}

.search-caption .h3::after{
  content: "";
  display: inline-block;
  width: 13px;
  height: 26px;
  background: url("./res/arrow_hero_banner.svg") center / contain no-repeat;
  transform: translateY(0px);
  transition: transform .2s ease;
}

.search-caption .h3:hover::after{
  transform: translate(2px, 0px);
}

/* «картинка» в правом нижнем углу */
.search-hero{
  position:absolute; right:0px; bottom:0.5px;
  width:110px; height:68px;
  background: url("./main_banner_res/main_banner.png") center / contain no-repeat;
  pointer-events:none;
  border: 1px solod red;
  border-radius: 0px 0px 22px 0px;
}

.filter-icon {
  width: 24px;
  height: 24px;
  background: url("./res/icon_filter.svg") center / contain no-repeat;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* === ЛИПКИЙ ПОИСК === */
.search-sticky{
  position: fixed;
  left: 0;
  right: 0;
  top: calc(env(safe-area-inset-top) + 0px);
  z-index: 1100;

  background:#fff;
  padding:10px;
  border-radius: 0;

  transform: translateY(-120%);
  opacity: 1;
  pointer-events: none;

  transition: transform .28s cubic-bezier(.22,.7,.23,1);
  will-change: transform;
}

/* Показать */
.search-sticky.is-on{
  transform: translateY(0);
  pointer-events: auto;
}

/* внутрянка */
.search-sticky .search{
  background:#F2F1F0;
  border-radius:16px;
  padding:0 12px;
  height:52px;
}
.search-sticky input{ background:#F2F1F0; }
.search-sticky .search-icon{ transform: translateY(-1px) scale(.95); }
.search-sticky .filter-icon{ transform: translateY(-1px) scale(.95); }

/* Сентинел */
#search-sentinel{ height:1px; }

/* уважение к reduce-motion */
@media (prefers-reduced-motion: reduce){
  .search-sticky{ transition:none; }
}

/*РУБРИКАТОР*/
.tabs {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin: 24px 10px 24px;
}

.tab-row {
  display: grid;
  gap: 6px;
}

.tab-row.first {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.tab-row.second {
  grid-template-columns: repeat(4, minmax(0, 1fr));
}

.tab {
  background-color: #f3f4f6;
  border-radius: 16px;
  text-align: left;
  height: 78px;
  display: flex;
  cursor: pointer;
  padding: 10px 0px 0px 12px;
}

.goods {
  background-image: url("./rubrukator_res/goods.png");
  background-repeat: no-repeat;
  background-position: right bottom;
  background-size: contain;
}

.realty {
  background-image: url("./rubrukator_res/realty.png");
  background-repeat: no-repeat;
  background-position: right bottom;
  background-size: contain;
}
  
.travel {
  background-image: url("./rubrukator_res/travel.png");
  background-repeat: no-repeat;
  background-position: right bottom;
  background-size: contain;
}

.auto {
  background-image: url("./rubrukator_res/auto.png");
  background-repeat: no-repeat;
  background-position: right bottom;
  background-size: contain;
}

.service {
  background-image: url("./rubrukator_res/service.png");
  background-repeat: no-repeat;
  background-position: right bottom;
  background-size: contain;
}

.job {
  background-image: url("./rubrukator_res/job.png");
  background-repeat: no-repeat;
  background-position: right bottom;
  background-size: contain;
}

.all {
  background-image: url("./rubrukator_res/all.png");
  background-repeat: no-repeat;
  background-position: right bottom;
  background-size: contain;
}

/* ПРОМО */
.promo {
  height:128px;
  background: linear-gradient(to right, #56A1D9 0%, #4598D6 100%);
  border-radius:16px;
  padding:16px;
  margin:0 10px 24px;
  position:relative;
  overflow:hidden;
}

.img-right {
  position:absolute;
  right:0;
  bottom:0;
  width:171px;
  height: 128px;
  background: url("./promo_res/img_right.png") no-repeat right bottom / contain;
  pointer-events:none;
}

.img-left {
  position:absolute;
  left:0;
  bottom:0;
  width:354px;
  height: 128px;
  background: url("./promo_res/img_left.png") no-repeat left bottom / contain;
  pointer-events:none;
}

.promo .tag {
  position: absolute;
  top: 10px;
  right: 10px;
  display: inline-flex;
  align-items: center;
  height: 17px;
  padding: 0 6px;
  width: auto;
  max-width: calc(100% - 20px);
  white-space: nowrap;
  color: #fff;
  font-size: 9px;
  font-weight: 300;
  line-height: 17px;
  border-radius: 100px;
  background: rgba(255,255,255,0.10);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  z-index: 1;
}

.promo .tag .tag__label{
  display: block;
  transform: translateY(-1px);  /* поднимаем текст на 1px */
}
